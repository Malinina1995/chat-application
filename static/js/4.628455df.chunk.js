(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[4],{232:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n=function(e){if(!e)return"Field is required"},r=function(e){return function(t){return t&&t.length>e?"Must be ".concat(e," characters or less"):void 0}}},233:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return i}));var n=a(242),r=a(0),o=a.n(r),l=(a(234),a(237)),c=function(e){var t=e.input,a=e.meta,r=a.touched,c=a.error,i=e.placeholder,s=Object(n.a)(e,["input","meta","placeholder"]),u=r&&c,m=l({"form-control":!0,"send-message":!0,errorTextarea:u,borderColor:!u});return o.a.createElement("textarea",Object.assign({className:m,placeholder:i},t,s))},i=function(e){var t=e.input,a=e.meta,r=a.touched,c=a.error,i=e.placeholder,s=Object(n.a)(e,["input","meta","placeholder"]),u=r&&c,m=l({"form-control":!0,errorTextarea:u,borderColor:!u});return o.a.createElement("input",Object.assign({className:m,placeholder:i},t,s))}},234:function(e,t,a){},235:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return d}));var n=a(53),r=a(54),o=a(56),l=a(55),c=a(14),i=a(0),s=a.n(i),u=a(22),m=a(29),p=a(52),f=function(e){var t=function(t){Object(o.a)(i,t);var a=Object(l.a)(i);function i(){return Object(n.a)(this,i),a.apply(this,arguments)}return Object(r.a)(i,[{key:"render",value:function(){return this.props.isAuth?s.a.createElement(e,this.props):s.a.createElement(c.a,{to:"/login"})}}]),i}(s.a.Component);return Object(u.c)((function(e){return{isAuth:e.auth.isAuth}}))(t)},d=function(e){var t=function(t){Object(o.a)(c,t);var a=Object(l.a)(c);function c(){return Object(n.a)(this,c),a.apply(this,arguments)}return Object(r.a)(c,[{key:"componentDidMount",value:function(){this.props.authThunkCreator()}},{key:"render",value:function(){return void 0===this.props.isAuth?s.a.createElement(p.a,null):s.a.createElement(e,this.props)}}]),c}(s.a.Component);return Object(u.c)((function(e){return{isAuth:e.auth.isAuth}}),{authThunkCreator:m.b})(t)}},257:function(e,t,a){},258:function(e,t,a){},259:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},311:function(e,t,a){"use strict";a.r(t);var n=a(53),r=a(54),o=a(56),l=a(55),c=a(0),i=a.n(c),s=a(14),u=a(20),m=(a(257),a(25)),p=a(27),f=a(108),d=a(109),b=a(232),h=a(233),v=(a(258),a(259),function(e){var t=e.message;return i.a.createElement("div",{className:"post"},i.a.createElement("img",{src:"https://avatars.yandex.net/get-music-user-playlist/27701/265236767.1000.16809/m1000x1000?1498108273588&webp=false",alt:""}),i.a.createElement("span",null,t))}),E=Object(b.a)(30),g=Object(d.a)({form:"addPost",onSubmitSuccess:function(e,t){return t(Object(p.a)("addPost"))}})((function(e){var t=e.handleSubmit;return i.a.createElement("form",{className:"form-group textarea",onSubmit:t},i.a.createElement(f.a,{component:h.b,name:"newPostText",placeholder:"What's new?",rows:"3",value:"",validate:[b.b,E]}),i.a.createElement("div",null,i.a.createElement("button",{className:"btn btn-primary textarea-send"},"Add")))})),y=a(22),O=a(58),k={addPost:O.a},j=Object(y.c)((function(e){return{posts:e.profilePage.posts}}),k)((function(e){return i.a.createElement("div",{className:"profile_posts"},i.a.createElement(g,{onSubmit:function(t){e.addPost(t.newPostText)}}),i.a.createElement("div",{className:"profile_posts-items"},Object(m.a)(e.posts).reverse().map((function(e){return i.a.createElement(v,{key:e.id,message:e.message})}))))}));var N=a(73);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(i){r=!0,o=i}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}}(e,t)||Object(N.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=a(52),S=(a(300),a(301),function(e){var t=T(Object(c.useState)(!1),2),a=t[0],n=t[1],r=T(Object(c.useState)(e.status),2),o=r[0],l=r[1];return Object(c.useEffect)((function(){l(e.status)}),[e.status]),i.a.createElement("div",{className:"profile-status"},a?i.a.createElement("div",null,i.a.createElement("input",{onChange:function(e){l(e.currentTarget.value)},autoFocus:!0,onBlur:function(){n(!1),e.updateStatus(o)},value:o})):i.a.createElement("div",{onDoubleClick:function(){e.isOwner?n(!0):n(!1)}},e.status||"No status"))}),_=(a(302),function(e){var t,a=e.profile,n=e.isOwner,r=e.goToEditMode,o=null!==(t=a.contacts)&&void 0!==t?t:{};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement("span",{className:"profile_info-title"},"About me: "),i.a.createElement("span",null,a.aboutMe)),i.a.createElement("div",null,i.a.createElement("span",{className:"profile_info-title"},"Looking for a job: "),i.a.createElement("span",null,a.lookingForAJob?"yes":"no")),a.lookingForAJob&&i.a.createElement("div",null,i.a.createElement("span",{className:"profile_info-title"},"My professional skills: "),i.a.createElement("span",null,a.lookingForAJobDescription)),i.a.createElement("div",{className:"profile_info-title"},"Contacts:"),Object.keys(o).map((function(e){return i.a.createElement(x,{key:e,contactsTitle:e,contactsValue:o[e]})})),n&&i.a.createElement("div",null,i.a.createElement("button",{className:"btn btn-primary",onClick:r},"edit")))}),x=function(e){var t=e.contactsTitle,a=e.contactsValue;return i.a.createElement("div",null,i.a.createElement("span",{className:"profile_info-title contacts"},t,": "),i.a.createElement("span",null,a))},A=(a(303),function(e){var t=e.contactsTitle,a=e.contactsValue;return i.a.createElement("div",null,i.a.createElement("span",{className:"profile_info-title contacts"},t,": "),i.a.createElement(f.a,{component:h.a,type:"text",name:"contacts.".concat(a)}))}),w=Object(d.a)({form:"edit-profile"})((function(e){var t,a=e.handleSubmit,n=e.initialValues,r=e.error,o=null!==(t=n.contacts)&&void 0!==t?t:{};return i.a.createElement("form",{onSubmit:a},i.a.createElement("div",null,i.a.createElement("span",{className:"profile_info-title"},"Full name: "),i.a.createElement(f.a,{component:h.a,type:"text",name:"fullName",validate:[b.b]})),i.a.createElement("div",null,i.a.createElement("span",{className:"profile_info-title"},"About me: "),i.a.createElement(f.a,{component:h.a,type:"text",name:"aboutMe",validate:[b.b]})),i.a.createElement("div",{className:"profile_info-checkbox"},i.a.createElement("span",{className:"profile_info-title profile_info-checkbox-title"},"Looking for a job: "),i.a.createElement(f.a,{component:h.a,style:{flexBasis:"10%"},type:"checkbox",name:"lookingForAJob"})),i.a.createElement("div",null,i.a.createElement("span",{className:"profile_info-title"},"My professional skills: "),i.a.createElement(f.a,{component:h.b,type:"text",name:"lookingForAJobDescription",validate:[b.b]})),i.a.createElement("div",{className:"profile_info-title"},"Contacts:"),Object.keys(o).map((function(e){return i.a.createElement(A,{key:e,contactsTitle:e,contactsValue:o[e]})})),i.a.createElement("div",{className:"someError"},r),i.a.createElement("div",null,i.a.createElement("button",{className:"btn btn-primary"},"save")))})),P=function(e){var t,a=e.isOwner,n=e.profile,r=e.status,o=e.updateUserStatusThunkCreator,l=e.saveDataThunkCreator,s=e.savePhotoThunkCreator,u=T(Object(c.useState)(!1),2),m=u[0],p=u[1];if(!n)return i.a.createElement(C.a,null);var f=(null===(t=n.photos)||void 0===t?void 0:t.large)?n.photos.large:"https://avatars.mds.yandex.net/get-pdb/1732371/78b3b128-3813-4d35-8b87-b3c911581ca0/s1200?webp=false";return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"profile_info"},i.a.createElement("div",null,i.a.createElement("img",{src:f,alt:"",className:"profile_info-avatar"})),i.a.createElement("div",{className:"profile_information"},i.a.createElement("span",{className:"profile_info-name"},n.fullName),i.a.createElement(S,{status:r,isOwner:a,updateStatus:o}),m?i.a.createElement(w,{initialValues:n,onSubmit:function(e){l(e).then((function(){p(!1)}))}}):i.a.createElement(_,{goToEditMode:function(){p(!0)},profile:n,isOwner:a}))),a&&i.a.createElement("div",{className:"profile_info-addPhoto"},"Update avatar ",i.a.createElement("input",{type:"file",onChange:function(e){if(e.target.value.length){var t,a,n=null!==(t=null===(a=e.target)||void 0===a?void 0:a.files)&&void 0!==t?t:[];n.length&&s(n[0])}}})))},F=function(e){return i.a.createElement("div",{className:"profile-content"},i.a.createElement(P,e),i.a.createElement("div",{className:"profile_posts"},i.a.createElement(j,null)))},I=a(235),U={getUserThunkCreator:O.c,getUserStatusThunkCreator:O.b,updateUserStatusThunkCreator:O.g,savePhotoThunkCreator:O.f,saveDataThunkCreator:O.e},M=Object(y.c)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,logUserId:e.auth.userId,isAuth:e.auth.isAuth}}),U),D=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"refreshProfile",value:function(){var e=this.props.match.params.userId?+this.props.match.params.userId:this.props.logUserId;this.props.getUserThunkCreator(e),this.props.getUserStatusThunkCreator(e)}},{key:"render",value:function(){var e=!this.props.match.params.userId;return i.a.createElement(i.a.Fragment,null,this.props.profile?i.a.createElement(F,Object.assign({},this.props,{isOwner:e})):i.a.createElement(C.a,null))}}]),a}(c.Component);t.default=Object(u.d)(M,s.g,I.b,I.a)(D)}}]);
//# sourceMappingURL=4.628455df.chunk.js.map